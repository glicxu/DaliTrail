<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DaliTrail</title>
  <link rel="manifest" href="/manifest.webmanifest"/>
  <meta name="theme-color" content="#2b7ff6"/>
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/icon-180.png"/>
  <link rel="apple-touch-icon" sizes="192x192" href="/assets/icons/icon-192.png"/>
  <link rel="apple-touch-icon" sizes="512x512" href="/assets/icons/icon-512.png"/>
  <link rel="stylesheet" href="assets/style.css"/>

  <!-- Preload ESM deps -->
  <link rel="modulepreload" href="/assets/js/utils.js"/>
  <link rel="modulepreload" href="/assets/js/location.js"/>
  <link rel="modulepreload" href="/assets/js/walk.js"/>
  <link rel="modulepreload" href="/assets/js/kml-import.js"/>
  <link rel="modulepreload" href="/assets/js/sketch-map.js"/>,
  <link rel="modulepreload" href="/assets/js/main.js"/>,
  <link rel="modulepreload" href="/assets/js/notes.js"/>,
</head>
<body>
  <main class="app" data-view="home">
    <header class="app-header">
    <button class="btn btn-outline back-btn" id="back-btn" hidden aria-label="Back">
    <!-- Left arrow icon -->
    <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
      <path d="M14 6l-6 6 6 6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </button>
      <div>
        <h1>DaliTrail</h1>
        <p class="subtitle">Track and share your location.</p>
      </div>
    </header>

    <section class="view home-view" data-view="home">
      <p class="intro">Pick how you want to use DaliTrail today.</p>
      <div class="home-actions">
        <button class="btn btn-primary" id="open-location-view-btn">Location</button>

        <button class="btn btn-primary" id="open-notes-view-btn">Note</button>
      </div>
      <button class="icon-btn about-btn" id="open-about-view-btn" aria-label="About DaliTrail">
        <span class="ellipsis-icon" aria-hidden="true"><span></span><span></span><span></span></span>
      </button>
    </section>

    <section class="view about-view" data-view="about" hidden>
      <h2>About</h2>
      <p class="section-copy">Manage the app on your device and keep it up to date.</p>

      <section class="install" hidden>
        <h3>Install</h3>
        <p>Add DaliTrail to your device for a full-screen experience.</p>
        <div class="install-actions">
          <p class="install-note status-text" id="install-hint">Install instructions will update based on your device.</p>
          <button class="btn btn-primary" id="install-btn">Install App</button>
          <p class="status-text" id="install-status" role="status">Tap Install to add DaliTrail. We’ll guide you if anything else is needed.</p>
        </div>
      </section>

      <section class="update" id="update-section" hidden>
        <h3>Update</h3>
        <p>Download the latest improvements without leaving the app.</p>
        <button class="btn btn-outline" id="update-btn">Check for Updates</button>
      </section>

      <section class="log" hidden>
        <h3>Activity Log</h3>
        <ul id="log"></ul>
      </section>

      <section class="log-toggle">
        <button class="btn btn-outline" id="toggle-log-btn" aria-expanded="false">Show Log</button>
      </section>
    </section>

    <section class="view location-view" data-view="location" hidden>
  
      <!-- Status line -->
      <p id="location-status" class="status-text">No locations saved yet.</p>

      <!-- Latest + Sun/Moon -->
      <section class="latest-location">
        <h3>Latest Location</h3>
        <div id="latest-location-card" class="location-card empty" aria-live="polite">
          <p class="status-text">No locations saved yet.</p>
        </div>

        <section class="sun-card" id="sun-card" hidden>

          <p><strong>Sunrise:</strong> <span id="sunrise-text">—</span></p>
          <p><strong>Sunset:</strong> <span id="sunset-text">—</span></p>
        </section>

        <section id="moon-card" class="sun-card" hidden>
          <p><strong>Moonrise:</strong> <span id="moonrise-text">—</span></p>
          <p><strong>Moonset:</strong> <span id="moonset-text">—</span></p>
          <p><strong>Phase:</strong> <span id="moonphase-text">—</span></p>
        </section>
      </section>

      <button class="btn btn-outline" id="open-location-history-btn" disabled>Previous Locations</button>
    </section>

    <section class="view location-history-view" data-view="location-history" hidden>
      <h2>Saved Locations</h2>
      <p class="section-copy">Select the points you want to share or view on a map.</p>

      <ul id="locations-list"></ul>
      <p id="location-history-status" class="status-text">No saved locations yet.</p>

      <div class="history-actions">
        <button class="btn btn-primary" id="history-view-btn" disabled>View on Map</button>
        <button class="btn btn-outline" id="history-share-btn" disabled>Share</button>
        <button class="btn btn-danger" id="history-delete-btn" disabled>Delete</button>
        <!-- Walk / Sketch are injected by JS -->
      </div>
    </section>

    <section class="view notes-view" data-view="notes" hidden>
      <div class="notes-editor">
        <label for="note-input" class="visually-hidden">New note</label>
        <textarea id="note-input" placeholder="Type a quick note…"></textarea>
        <button class="btn btn-primary" id="add-note-btn">Add</button>
        </div>

        <ul class="notes-list" id="notes-list"></ul>
        <p id="notes-status" class="status-text">No notes yet.</p>
    </section>

 </main>

  <script type="module" src="/assets/js/main.js"></script>
</body>
</html>
